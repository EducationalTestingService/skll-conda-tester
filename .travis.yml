language: generic
os:
  - linux
notifications:
  email: false
  slack:
    secure: 'qwF/FTtn70fnvbKHWTULrVXNdb7jiwkwl98KYLBJ0ZwX11sIKwKbj4mLuG3wFrFeSwHLVmrY/Ofrg2xj7zDIElyqXsUWvmPfaX3dEoBccAbYgnk2UEtLH0QvsAWP3lYvDyWeMguz9fRyiKNvKx72yAqQ7E94Wo0ZazeD41Jqdz1NVpLHP0YbEepeP80jcBhswbASJ+Hs8Ck2P2MhymjHT2Eoecm7BV0DxukrQcD2QMdDs4eRZFXpeqpJB82iw0MRmdXfOQKwN/UGbHs4uj2NuU2K9Pw7iOMG/awyK+L/eYiuNX8DkwXajK/zcO9R4k3XzCiHzaMhG72okKqJNDcTpQg2XujXDTpeg8F9q/+fkblajb5v6dQ60npROiJllqJX+cra60oWU/ww8ci0TUVdWsKL0PpJltb2F6sQOe/4spJ960G0cTR3tIt1NIcoYbBiOxYElPbqf1cEbQHuO3YvJHw56stDM1Ws5Ft2w+beYyGftXOePCIDlRCBUBO7bV92PvxMkUfTcmAemj/hc9qOLuEhwAdu+UOrK0LfH+XVUHD8NQUbe49be0675HsPhYfGXD3lCjCN91k8jxu6pNebUB10kjZksL9EhaEzeXLeO/EqTRXrQ2hj3CHx4wzoPlXeJ5nphMu0FaL2oVVxxU84Dg7W+GL1Y1gX1QFFMnMVUdY='
env:
  global:
  - SKLLVERSION="2.1"
  - TESTDIR="${HOME}/skllcode/tests"
  matrix:
  - TESTFILES="tests/test_featureset.py tests/test_utilities.py"
  - TESTFILES="tests/test_output.py"
  - TESTFILES="tests/test_regression.py"
  - TESTFILES="tests/test_input.py tests/test_preprocessing.py tests/test_metrics.py tests/test_custom_learner.py tests/test_logutils.py tests/test_examples.py"
  - TESTFILES="tests/test_classification.py tests/test_cv.py tests/test_ablation.py"


# run on the new Travis infrastructure
sudo: false

# install conda
before_install:
  - wget http://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh
  - chmod +x miniconda.sh
  - ./miniconda.sh -b
  - export PATH="${HOME}/miniconda3/bin:$PATH"
# clone just the skll tests and examples and install the skll package
install:
  - mkdir ${HOME}/skllcode
  - cd ${HOME}/skllcode
  - git init
  - git remote add -f origin https://github.com/EducationalTestingService/skll.git
  - git config core.sparsecheckout true
  - echo "tests/*" > .git/info/sparse-checkout
  - echo "examples/*" > .git/info/sparse-checkout
  - git pull --depth=1 origin master
  - conda create --name skllenv -c conda-forge -c ets python=3.6 skll=${SKLLVERSION} --yes

# run these tests using the installed skll package
script:
  - ${HOME}/miniconda3/envs/skllenv/bin/nosetests --nologcapture -w ${TESTDIR} ${TESTFILES}
